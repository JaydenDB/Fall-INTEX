<header class="site-header">
  <div class="container header-inner" style="display:flex; align-items:center; justify-content:space-between; gap:1rem; padding:0.75rem 0;">

    <!-- logo and site title on the left -->
    <a href="/" class="brand" style="display:flex; align-items:center; gap:0.5rem; text-decoration:none;">
      <img
        src="/images/ella%20rises%20logo.png"
        alt="Ella Rises Logo"
        style="width: 48px; height: 48px; border-radius:12px; object-fit:cover;"
      >
      <span style="font-family: 'Playfair Display', serif; font-weight:700; font-size:1.1rem; color:var(--text-strong, #2b1b3f);">
        Ella Rises Portal
      </span>
    </a>

    <!-- main nav section in the center -->
    <nav class="main-nav" style="display:flex; align-items:center; gap:0.9rem; font-size:0.9rem;">

      <!-- home link with active state -->
      <a
        href="/"
        class="nav-link <%= activePage === 'home' ? 'is-active' : '' %>"
        style="text-decoration:none; color:var(--text-muted, #6b5a7d); padding:0.25rem 0.35rem; border-radius:999px;"
      >
        Home
      </a>

      <% if (user) { %>
        <% if (user.role === 'admin') { %>

          <!-- admin navigation -->
          <a
            href="/events"
            class="nav-link <%= activePage === 'events' ? 'is-active' : '' %>"
            style="text-decoration:none; color:var(--text-muted, #6b5a7d); padding:0.25rem 0.35rem; border-radius:999px;"
          >
            Events
          </a>

          <a
            href="/admin/dashboard"
            class="nav-link <%= activePage === 'dashboard' ? 'is-active' : '' %>"
            style="text-decoration:none; color:var(--text-muted, #6b5a7d); padding:0.25rem 0.35rem; border-radius:999px;"
          >
            Admin dashboard
          </a>

          <a
            href="/participants"
            class="nav-link <%= activePage === 'participants' ? 'is-active' : '' %>"
            style="text-decoration:none; color:var(--text-muted, #6b5a7d); padding:0.25rem 0.35rem; border-radius:999px;"
          >
            Participants
          </a>

          <a
            href="/admin/donations"
            class="nav-link <%= activePage === 'admin-donations' ? 'is-active' : '' %>"
            style="text-decoration:none; color:var(--text-muted, #6b5a7d); padding:0.25rem 0.35rem; border-radius:999px;"
          >
            Donations
          </a>

        <% } else { %>

          <!-- participant navigation -->
          <a
            href="/me"
            class="nav-link <%= activePage === 'me' ? 'is-active' : '' %>"
            style="text-decoration:none; color:var(--text-muted, #6b5a7d); padding:0.25rem 0.35rem; border-radius:999px;"
          >
            My portal
          </a>

          <a
            href="/events"
            class="nav-link <%= activePage === 'events' ? 'is-active' : '' %>"
            style="text-decoration:none; color:var(--text-muted, #6b5a7d); padding:0.25rem 0.35rem; border-radius:999px;"
          >
            Events
          </a>

          <a
            href="/donate"
            class="nav-link <%= activePage === 'donate' ? 'is-active' : '' %>"
            style="text-decoration:none; color:var(--text-muted, #6b5a7d); padding:0.25rem 0.35rem; border-radius:999px;"
          >
            Donate
          </a>

        <% } %>
      <% } else { %>

        <!-- navigation when not logged in -->
        <a
          href="/events"
          class="nav-link <%= activePage === 'events' ? 'is-active' : '' %>"
          style="text-decoration:none; color:var(--text-muted, #6b5a7d); padding:0.25rem 0.35rem; border-radius:999px;"
        >
          Events
        </a>

        <a
          href="/donate"
          class="nav-link <%= activePage === 'donate' ? 'is-active' : '' %>"
          style="text-decoration:none; color:var(--text-muted, #6b5a7d); padding:0.25rem 0.35rem; border-radius:999px;"
        >
          Donate
        </a>

      <% } %>
    </nav>

    <!-- right side: login, logout, or user info -->
    <div class="header-actions" style="display:flex; align-items:center; gap:0.6rem; font-size:0.85rem;">

      <% if (user) { %>
        <!-- shows user name/email and role -->
        <span
          class="user-pill"
          style="
            padding:0.25rem 0.7rem;
            border-radius:999px;
            background:rgba(235,216,255,0.7);
            color:#5b3f7a;
            font-weight:600;
            max-width:200px;
            white-space:nowrap;
            overflow:hidden;
            text-overflow:ellipsis;
          "
        >
          <%= user.name || user.email %> Â· <%= user.role === 'admin' ? 'Admin' : 'Participant' %>
        </span>

        <!-- logout button -->
        <a
          href="/logout"
          class="btn btn-ghost btn-sm"
          style="text-decoration:none; padding:0.35rem 0.8rem; border-radius:999px; border:1px solid rgba(91,63,122,0.2);"
        >
          Log out
        </a>

      <% } else { %>

        <!-- login button for visitors -->
        <a
          href="/login"
          class="btn btn-ghost btn-sm"
          style="text-decoration:none; padding:0.35rem 0.8rem; border-radius:999px; border:1px solid rgba(91,63,122,0.2);"
        >
          Log in
        </a>

        <!-- signup button for visitors -->
        <a
          href="/signup"
          class="btn btn-primary btn-sm"
          style="
            text-decoration:none;
            padding:0.35rem 0.9rem;
            border-radius:999px;
            background:linear-gradient(135deg, #7a4ba3, #e75480);
            color:#fff;
          "
        >
          Sign up
        </a>

      <% } %>

    </div>
  </div>
</header>
